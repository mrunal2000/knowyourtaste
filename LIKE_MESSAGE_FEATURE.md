# Like Message Feature Implementation

## Overview
This feature generates personalized messages when users click "like" on outfit images. The message is generated by GPT based on the metadata it previously generated about the outfit.

## How It Works

1. **User clicks "like"** on an outfit image
2. **Metadata is sent** to the `/api/like-message` endpoint
3. **GPT generates** a personalized message starting with "You seem to like..."
4. **Message is displayed** above the style analysis for 3 seconds
5. **User moves** to the next image automatically

## API Endpoints

### `/api/like-message` (POST)
- **Input**: `{ "metadata": "outfit analysis text" }`
- **Output**: `{ "message": "You seem to like..." }`
- **Purpose**: Generates personalized like messages using GPT-4o

## Frontend Changes

### New State Variables
- `likeMessage`: Stores the generated personalized message
- `isGeneratingLikeMessage`: Tracks loading state for message generation

### New Functions
- `generateLikeMessage()`: Calls the API to generate personalized messages
- Updated `handleLikeClick()`: Now generates and displays like messages

### UI Updates
- Like message appears above style analysis when user clicks like
- Loading state shows "Generating your personalized message..."
- Button shows "Generating..." during message generation
- Message automatically clears when moving to next image

## Testing

### Local Development
1. Set up environment variables:
   ```bash
   cp env.template .env.local
   # Add your OpenAI API key to .env.local
   ```

2. Start the local test server:
   ```bash
   node local-test.js
   ```

3. Start the frontend:
   ```bash
   npm run dev
   ```

4. Test the feature:
   - Navigate to the "play" tab
   - Click "like" on an outfit image
   - Verify the personalized message appears
   - Check that it moves to the next image after 3 seconds

### Production (Vercel)
The feature automatically works with Vercel serverless functions when deployed.

## Styling
- **Like Message**: Gradient background with white text
- **Loading State**: Yellow-orange gradient with pulse animation
- **Positioning**: Centered above style analysis with proper spacing

## Error Handling
- Fallback message if API fails: "You seem to like this outfit!"
- Proper error logging for debugging
- Graceful degradation when OpenAI API is unavailable
